
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificates - edwyna</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="certificates.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
  // Check before page loads
  if (!localStorage.getItem('jwtToken')) {
    alert('You need to login first');
    window.location.href = 'index.html';
  }
</script>

    <!-- Additional styles for API functionality -->
    <style>
         * {
    user-select: text !important;
    -webkit-user-select: text !important;
    -ms-user-select: text !important;
    -moz-user-select: text !important;
  }
        body{
            user-select: text !important;
            font-family: 'Outfit', sans-serif;
        }
        .certificate-card {
            transition: all 0.3s ease;
            margin-bottom: 1.5rem;
            border-radius: 8px;
            border: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .certificate-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .certificate-card .card-body {
            padding: 1.5rem;
        }
        .certificate-card .card-title {
            color: rgba(94, 10, 0, 1);
            margin-bottom: 1rem;
        }
        .certificate-code {
            font-family: monospace;
            background: #f8f9fa;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
        }
        .no-certificates {
            text-align: center;
            padding: 2rem;
            color: #6c757d;
        }
        .no-certificates i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #dee2e6;
        }
        .search-btn {
            width: 100%;
            padding: 0.75rem;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
<nav style="
  position: fixed;
  top: 0;
  width: 100%;
  background: white;
  box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
  z-index: 9999;
  padding: 0 20px;
  height: 70px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-family: 'Outfit', sans-serif;
">


  <!-- Logo -->
  <div style="
    font-size: 1.8rem;
    font-weight: 700;
    color: #6366f1;
  "> <img src="https://i.ibb.co/spyHywtx/Event-Hub-Logo45-1.jpg" alt="Logo" style="height: 55px; margin-top: 5%;"></div>

  <!-- Hamburger -->
  <div id="hamburgerBtn" style="
    display: none;
    flex-direction: column;
    cursor: pointer;
  " onclick="toggleNavMenu()">
    <div style="width: 25px; height: 3px; background: #1f2937; margin: 3px 0;"></div>
    <div style="width: 25px; height: 3px; background: #1f2937; margin: 3px 0;"></div>
    <div style="width: 25px; height: 3px; background: #1f2937; margin: 3px 0;"></div>
  </div>

  <!-- Nav Menu -->
  <div id="navMenu" style="
    display: flex;
    gap: 2rem;
    list-style: none;
    align-items: center;
  ">
    <a href="edwynahome.html" style="text-decoration: none; color: #1f2937; font-weight: 500;">Home</a>
    <a href="events.html" style="text-decoration: none; color: #1f2937; font-weight: 500;">Events</a>
    <a href="certificates.html" style="text-decoration: none; color: #1f2937; font-weight: 650;">Certificates</a>
    <a href="results.html" style="text-decoration: none; color: #1f2937; font-weight: 500;">Results</a>
    <a href="Intern.html" style="text-decoration: none; color: #1f2937; font-weight: 500;">Internships</a>
    <a href="refer.html" style="text-decoration: none; color: #1f2937; font-weight: 500;">Referral</a>
    <a href="1.html" style="text-decoration: none; color: #1f2937; font-weight: 500;">Profile</a>
    <a href="help.html" style="text-decoration: none; color: #1f2937; font-weight: 500;">Help</a>
    <!-- Login and Logout -->
    <a id="loginItem" href="Login.html" style="
      text-decoration: none;
      background: rgba(94,10,0,255);
      color: white;
      padding: 0.5rem 1.2rem;
      border-radius: 8px;
      font-weight: 600;
    ">Login</a>

    <a id="logoutItem" href="#" onclick="logoutUser()" style="
      text-decoration: none;
      background: #f46721;
      color: white;
      padding: 0.5rem 1.2rem;
      border-radius: 8px;
      font-weight: 600;
      display: none;
    ">Logout</a>
  </div>
  </div>
</nav>

              

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1>Download Certificates</h1>
            <p>Get your participation and achievement certificates instantly</p>
        </div>
    </section>

    <!-- Certificate Download Section -->
    <section class="certificate-section">
        <div class="container">
            <div class="certificate-container">
                <div class="certificate-form-section">
                    <div class="form-header">
                        <i class="fas fa-certificate"></i>
                        <h2>Certificate Lookup</h2>
                        <p>Enter your details to find and download your certificates</p>
                    </div>

                    <form id="certificate-form" class="certificate-form">
                        <div class="form-group" style="display:none;">
                            <label for="participant-name">Full Name</label>
                            <input type="text" id="participant-name" name="participant-name" 
                                   placeholder="Enter your full name as registered">
                        </div>

                        <div class="form-group">
                            <label for="participant-email">Email Address</label>
                            <input type="email" id="participant-email" name="participant-email" required readonly
                                   placeholder="Enter your registered email address">
                        </div>

                        <div class="form-group" style="display:none;">
                            <label for="certificate-code">Certificate Code (Optional)</label>
                            <input type="text" id="certificate-code" name="certificate-code"
                                   placeholder="Enter your certificate code if you have one">
                        </div>

                        <button type="submit" class="btn btn-primary search-btn">
                            <i class="fas fa-search"></i>
                            Find My Certificates
                        </button>
                        <center>
  <a href="VerifyCertificate.html" class="btn btn-outline-primary">
    <i class="bi bi-patch-check-fill me-2"></i>Verify Certificate
  </a>
</center>


                    </form>
                </div>

                <div class="certificate-preview-section">
                    <div class="preview-header">
                        <h3>Certificate Preview</h3>
                        <p>Your certificates will appear here</p>
                    </div>
                    
                    <div id="certificate-results" class="certificate-results">
                        <div class="no-certificates">
                            <i class="fas fa-certificate"></i>
                            <h4>No Certificates Found</h4>
                            <p>Enter your details to search for certificates</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
<style>
  /* Fullscreen overlay */
  #imageOverlay {
    position: fixed;
    display: none;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0, 0, 0, 0.85);
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }

  #imageOverlay img {
    max-width: 90%;
    max-height: 90%;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
  }

  #imageOverlay:active {
    display: none;
  }

  @media (min-width: 992px) {
    .certificate-flex {
      flex-direction: row !important;
    }
  }
</style>

<section style="padding: 2rem 0;">
  <div style="max-width: 1140px; margin: auto;">
    <h2 style="text-align: center; margin-bottom: 1rem; font-size: 2rem; font-weight: 600;">Sample Certificates</h2>
    <p style="text-align: center; margin-bottom: 2rem; color: #6c757d; padding: 2%; margin: 3%;">
      See examples of certificates you can earn by participating in our events
    </p>

    <div class="certificate-flex"
         style="display: flex; flex-direction: column; gap: 2rem; justify-content: center; align-items: center; flex-wrap: wrap;">

      <!-- Participation Certificate -->
      <div style="text-align: center;">
        <div style="margin-bottom: 1rem;">
          <img src="https://i.ibb.co/Y4p4tF8G/Edwyna1.jpg" alt="Participation Certificate"
               onclick="showFullImage(this.src)"
               style="max-width: 340px; width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); cursor: pointer;">
        </div>
        <h4 style="margin-bottom: 0.25rem;">Participation Certificate</h4>
        <p style="font-size: 0.875rem; color: #6c757d;">Awarded to all participants who complete an event</p>
      </div>

      <!-- Achievement Certificate -->
      <div style="text-align: center;">
        <div style="margin-bottom: 1rem;">
          <img src="https://i.ibb.co/wFqKJVgc/Edwyna3.jpg" alt="Achievement Certificate"
               onclick="showFullImage(this.src)"
               style="max-width: 340px; width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); cursor: pointer;">
        </div>
        <h4 style="margin-bottom: 0.25rem;">Achievement Certificate</h4>
        <p style="font-size: 0.875rem; color: #6c757d;">Awarded to winners and top performers</p>
      </div>

      <!-- Completion Certificate -->
      <div style="text-align: center;">
        <div style="margin-bottom: 1rem;">
          <img src="https://i.ibb.co/LdkYq5RV/Edwyna2.jpg" alt="Completion Certificate"
               onclick="showFullImage(this.src)"
               style="max-width: 340px; width: 100%; height: auto; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); cursor: pointer;">
        </div>
        <h4 style="margin-bottom: 0.25rem;">Completion Certificate</h4>
        <p style="font-size: 0.875rem; color: #6c757d;">Awarded for completing workshops and courses</p>
      </div>

    </div>
  </div>
</section>

<!-- Image Overlay -->
<div id="imageOverlay" onclick="this.style.display='none'">
  <img id="overlayImage" src="">
</div>

<script>
  function showFullImage(src) {
    document.getElementById('overlayImage').src = src;
    document.getElementById('imageOverlay').style.display = 'flex';
  }
</script>




    <!-- Instructions Section -->
    <section class="instructions-section">
        <div class="container">
            <h2 class="section-title">How to Download Your Certificate</h2>
            <div class="instructions-grid">
                <div class="instruction-card">
                    <div class="instruction-icon">
                        <i class="fas fa-user-edit"></i>
                    </div>
                    <h3>Step 1: Enter Details</h3>
                    <p>Fill in your full name and email address exactly as you registered for the event.</p>
                </div>
                
                <div class="instruction-card">
                    <div class="instruction-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3>Step 2: Search</h3>
                    <p>Click "Find My Certificates" to search for all certificates associated with your details.</p>
                </div>
                
                <div class="instruction-card">
                    <div class="instruction-icon">
                        <i class="fas fa-download"></i>
                    </div>
                    <h3>Step 3: Download</h3>
                    <p>Select and download your certificates in high-quality PDF format.</p>
                </div>
                
                <div class="instruction-card">
                    <div class="instruction-icon">
                        <i class="fas fa-share-alt"></i>
                    </div>
                    <h3>Step 4: Share</h3>
                    <p>Share your achievements on social media or add them to your professional profile.</p>
                </div>
            </div>
        </div>
    </section>

   <!-- Footer -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">


<!-- Footer -->
<footer class="footer" style="background: #7b3f00; color: white; padding: 2rem 0;">
  <div class="container" style="max-width: 1140px; margin: auto;">
    <div class="footer-content" style="display: flex; flex-wrap: wrap; justify-content: space-between; gap: 2rem;">

      <!-- About -->
      <div class="footer-section" style="flex: 1; min-width: 250px;">
        <h3 style="margin-bottom: 0.5rem;">edwyna</h3>
        <p style="color: #d1d5db;">
          Your premier platform for organizing and participating in educational and competitive events.
        </p>
      </div>

      <!-- Quick Links -->
      <div class="footer-section" style="flex: 1; min-width: 200px;">
        <h4 style="margin-bottom: 0.5rem;">Quick Links</h4>
        <ul style="list-style: none; padding: 0; color: #d1d5db;">
          <li><a href="edwynahome.html" style="color: #d1d5db; text-decoration: none;">Home</a></li>
          <li><a href="events.html" style="color: #d1d5db; text-decoration: none;">Events</a></li>
          <li><a href="certificates.html" style="color: #d1d5db; text-decoration: none;">Certificates</a></li>
          <li><a href="results.html" style="color: #d1d5db; text-decoration: none;">Results</a></li>
        </ul>
      </div>

      <!-- Contact + Social -->
      <div class="footer-section" style="flex: 1; min-width: 200px;">
        <h4 style="margin-bottom: 0.5rem;">Contact</h4>
   <div style="display: flex; justify-content: center;">
  <div style="display: flex; flex-direction: column; align-items: center;">
    <a href="mailto:edwynaofficial@gmail.com" style="color: #d1d5db; text-decoration: none; margin-bottom: 8px;">
      <i class="fas fa-envelope" style="margin-right: 8px;"></i> edwynaofficial@gmail.com
    </a>
    <a href="tel:+918015500319" style="color: #d1d5db; text-decoration: none;">
      <i class="fas fa-phone" style="margin-right: 8px;"></i> +91 80155 00319
    </a>
  </div>
</div>




        <!-- Social Icons -->
        <div style="margin-top: 1rem;">
          <a href="https://www.facebook.com/share/15pxp9QDPR/" target="_blank"
             style="color: white; font-size: 1.3rem; margin-right: 0.8rem;" title="Facebook">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="https://x.com/edwynaofficial" target="_blank"
             style="color: white; font-size: 1.3rem; margin-right: 0.8rem;" title="Twitter (X)">
            <i class="fab fa-x-twitter"></i>
          </a>
          <a href="https://youtube.com/@edwynaofficial?si=VsR5SpLR479fn-fS" target="_blank"
             style="color: white; font-size: 1.3rem; margin-right: 0.8rem;" title="YouTube">
            <i class="fab fa-youtube"></i>
          </a>
          <a href="https://www.linkedin.com/in/edwyna-rise-beyond-a16953375" target="_blank"
             style="color: white; font-size: 1.3rem; margin-right: 0.8rem;" title="LinkedIn">
            <i class="fab fa-linkedin-in"></i>
          </a>
          <a href="https://www.instagram.com/edwyna_official?utm_source=qr&igsh=MmRqaTIxY3FqdWQz" target="_blank"
             style="color: white; font-size: 1.3rem;" title="Instagram">
            <i class="fab fa-instagram"></i>
          </a>
        </div>
      </div>
    </div>

    <!-- Bottom -->
    <div class="footer-bottom" style="text-align: center; margin-top: 2rem; font-size: 0.875rem; color: #9ca3af;">
      <p>&copy; 2025 edwyna. All rights reserved.</p>
    </div>
  </div>
</footer>



    <script src="script.js"></script>
    <script>
      document.getElementById("participant-email").value = localStorage.getItem("user").email || "";
        // Disable right-click context menu
document.addEventListener('contextmenu', e => e.preventDefault());

// Disable specific key shortcuts
document.addEventListener('keydown', function(e) {
  if (
    e.key === 'F12' ||
    (e.ctrlKey && e.shiftKey && ['I', 'J', 'C'].includes(e.key.toUpperCase())) ||
    (e.ctrlKey && ['U', 'S', 'P'].includes(e.key.toUpperCase()))
  ) {
    e.preventDefault();
    
  }
});

        

        function logout() {
  localStorage.clear(); // Clears all localStorage keys
  window.location.href = "index.html"; // Redirect to login/home page
}
        const API_BASE_URL = 'https://eventdb.onrender.com/api';
       let currentToken = localStorage.getItem('jWtToken');
        // Reusable request function
        async function makeRequest(method, endpoint, data = null, requiresAuth = true) {
            const headers = { 'Content-Type': 'application/json' };
            if (requiresAuth && currentToken) {
                headers['Authorization'] = `Bearer ${currentToken}`;
            }

            const options = { method, headers };
            if (data) options.body = JSON.stringify(data);

            try {
                const response = await fetch(`${API_BASE_URL}${endpoint}`, options);
                const contentType = response.headers.get('content-type');
                const result = contentType && contentType.includes('application/json') ? await response.json() : await response.text();

                if (!response.ok) {
                    throw new Error(result.error || result.message || 'Request failed');
                }

                return result;
            } catch (error) {
                console.error('API Error:', error);
                throw error;
            }
        }
       
        // Display certificates in the results area
        function displayCertificates(certificates, containerId) {
            const container = document.getElementById(containerId);
            
            if (!Array.isArray(certificates)) {
                certificates = [certificates]; // Handle single certificate case
            }

            if (certificates.length === 0) {
                container.innerHTML = `
                    <div class="no-certificates">
                        <i class="fas fa-certificate"></i>
                        <h4>No Certificates Found</h4>
                        <p>No certificates were found matching your search criteria</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = '';
            
            certificates.forEach(cert => {
                const card = document.createElement('div');
                card.className = 'card certificate-card';
                card.innerHTML = `
                   <div class="card-body" style="font-family: 'Outfit', sans-serif;">
  <h5 class="card-title">
    <i class="fas fa-award"></i> ${cert.event_title}
  </h5>
  <p class="card-text"><strong>Type:</strong> ${cert.event_type}</p>
  <p class="card-text"><strong>Participant:</strong> ${cert.participant_name}</p>
  <p class="card-text"><strong>Issued At:</strong> ${new Date(cert.issued_at).toLocaleString()}</p>
  <p class="card-text">
    <strong>Code:</strong>
    <span id="certCode-${cert.id}" style="font-family: monospace;">${cert.unique_code}</span>
    <button style="
      margin-left: 10px;
      padding: 4px 10px;
      font-size: 0.875rem;
      border-radius: 6px;
      border: 1px solid #6c757d;
      background: white;
      color: #6c757d;
      cursor: pointer;
    " onclick="navigator.clipboard.writeText(document.getElementById('certCode-${cert.id}').innerText).then(() => alert('Code copied!'))">
      <i class="fas fa-copy"></i> Copy
    </button>
  </p>
  <div style="display: flex; justify-content: flex-end; margin-top: 1rem;">
    <a href="${cert.certificate_url}" target="_blank" style="
      padding: 8px 16px;
      background: #6366f1;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      font-weight: 600;
    ">
      <i class="fas fa-download" style="margin-right: 6px;"></i> Download Certificate
    </a>
  </div>
</div>

                `;
                container.appendChild(card);
            });
        }

      document.getElementById('certificate-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const name = document.getElementById('participant-name').value.trim();
    const email = document.getElementById('participant-email').value.trim();
    const code = document.getElementById('certificate-code').value.trim();
    
    const resultsContainer = document.getElementById('certificate-results');
    resultsContainer.innerHTML = '<center><div class="text-center py-4"><i class="fas fa-spinner fa-spin fa-2x"></i><p>Searching for certificates...</p></div></center>';
    
    try {
        let certificates;

        if (code) {
            // Search by certificate code
            certificates = await makeRequest('GET', `/certificates/${code}`);
        } else if (email) {
            // Search by email
            const response = await makeRequest('GET', `/email/${encodeURIComponent(email)}`);


// Extract certificates from the events
certificates = response.events
  .filter(e => e.certificate)
  .map(e => ({
    event_title: e.event.title,
    event_type: e.event.type,
    participant_name: response.user.name,
    issued_at: e.certificate.issuedAt,
    unique_code: e.certificate.uniqueCode,
    certificate_url: e.certificate.url
  }));
        } else {
            // Fallback to all certificates and filter manually
            certificates = await makeRequest('GET', '/certificates');

            if (name) {
                certificates = certificates.filter(cert => 
                    cert.participant_name.toLowerCase().includes(name.toLowerCase())
                );
            }
        }

        displayCertificates(certificates, 'certificate-results');
    } catch (error) {
        resultsContainer.innerHTML = `
            <div class="alert alert-danger">
                <i class="fas fa-exclamation-circle"></i> Error: ${error.message}
            </div>
        `;
    }
});


        // Load certificates on page load if token exists
        document.addEventListener('DOMContentLoaded', async function() {
            if (!localStorage.getItem('jwtToken')) {
        Swal.fire('Error', 'You need to login first', 'error').then(() => {
          window.location.href = 'index.html';
        });
        return;
      }
            if (currentToken) {
                try {
                    console.log('Loading certificates for token:', currentToken);
                } catch (error) {
                    console.error('Could not load certificates:', error);
                }
            }
        });
        function logout() {
  localStorage.clear(); // Clears all localStorage keys
  window.location.href = "index.html"; // Redirect to login/home page
}

function toggleNavMenu() {
    const navMenu = document.getElementById('navMenu');
    navMenu.style.left = navMenu.style.left === '0px' ? '-100%' : '0px';
  }

  function handleResize() {
    const hamburger = document.getElementById('hamburgerBtn');
    const navMenu = document.getElementById('navMenu');
    if (window.innerWidth <= 768) {
      hamburger.style.display = 'flex';
      navMenu.style.position = 'fixed';
      navMenu.style.left = '-100%';
      navMenu.style.top = '70px';
      navMenu.style.width = '100%';
      navMenu.style.background = 'white';
      navMenu.style.flexDirection = 'column';
      navMenu.style.textAlign = 'center';
      navMenu.style.padding = '2rem 0';
      navMenu.style.transition = 'left 0.3s ease';
      navMenu.style.boxShadow = '0 10px 27px rgba(0, 0, 0, 0.05)';
    } else {
      hamburger.style.display = 'none';
      navMenu.removeAttribute('style');
      navMenu.style.display = 'flex';
      navMenu.style.gap = '2rem';
      navMenu.style.listStyle = 'none';
      navMenu.style.alignItems = 'center';
    }
  }

  function logoutUser() {
    localStorage.removeItem("user");
    window.location.href = "index.html";
  }

  document.addEventListener("DOMContentLoaded", () => {
    handleResize();
  });

        const user = localStorage.getItem("jwtToken");

    const loginItem = document.getElementById("loginItem");
    const logoutItem = document.getElementById("logoutItem");

    if (loginItem && logoutItem) {
      if (user) {
        logoutItem.style.display = "block";
        loginItem.style.display = "none";
      } else {
        logoutItem.style.display = "none";
        loginItem.style.display = "block";
      }
    }

  window.addEventListener('resize', handleResize);
    </script>
</body>
</html>
